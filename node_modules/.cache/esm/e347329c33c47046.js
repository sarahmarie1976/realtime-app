let express,cors,chat;_33c‍.w("express",[["default",["express"],function(v){express=v}]]);_33c‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_33c‍.w("./controllers/chat",[["default",["chat"],function(v){chat=v}]]);


require('dotenv').config();

// app
const app = express();
const http = require("http").createServer(app);

// socket io
const io = require("socket.io")(http, {
    path: "/socket.io",
    cors: {
        origin: ['http://localhost:3000'],
        methods: ["GET" , "POST"],
        allowedHeaders: ["content-type"],
    },
});

// middleware
app.use(cors());
app.use(express.json({limit: "5mb"}));
app.use(express.urlencoded({ extended: true }));

// rest api 
app.get('/api', (req, res) => {
    res.send("THIS IS RESTFUL API!");
});

// socket 
chat(io);

const port = process.env.PORT || 8000;
http.listen(port, () => console.log(`Server is running on port ${port}`));
